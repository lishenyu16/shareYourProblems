webpackJsonp([1],{"+cgv":function(t,e){},"1EKY":function(t,e,s){t.exports=s.p+"static/img/spinner.4e242a3.gif"},"3f40":function(t,e){},"41pr":function(t,e){},"4qOc":function(t,e){},"7dLg":function(t,e){},Ext2:function(t,e){},"Fi+T":function(t,e){t.exports="1fa7a611c50b431697169760c02340c3"},NCou:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n=s("mtWM"),r=s.n(n),o=function(){return r.a.create({baseURL:"http://54.193.249.19:8080"})},i=function(t){return o().post("posts/addPost",t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},l=function(t){return o().post("posts/editPost",t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},c=function(t,e){return o().delete("posts/deletePost/"+t+"/"+e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},u=function(t,e){return o().delete("posts/deleteReply/"+t+"/"+e,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},d=function(){return o().get("notice/getnotice")},p=function(t){return o().post("notice/postnotice",t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},g=function(t){return o().get("posts?page="+t)},v=function(t){return o().get("posts/userPosts/"+t)},m=function(t){return o().get("posts/"+t)},f=function(t){return o().post("posts/addReply",t,{headers:{Authorization:"Bearer "+localStorage.getItem("token")}})},h={beforeCreate:function(){var t=this;d().then(function(e){t.$store.commit("UPDATE_NOTICE",e.data.content)})},data:function(){return{notice:this.$store.getters.currentNotice}},methods:{logout:function(){this.$store.commit("SET_USER",null),this.$store.commit("SET_TOKEN",null),this.$router.push("/login")},editNotice:function(){var t=this,e={content:this.notice};p(e).then(function(e){$("#noticeModal").modal("hide"),t.$store.commit("UPDATE_NOTICE",e.data.content)}).catch(function(e){401==e.response.status?($("#exampleModal").modal("hide"),alert("Your authentication expired, plz login"),console.log("log: Not authenticated operation, plz login"),t.$router.replace("/login")):403==e.response.status?alert("You have no authorization"):alert("Internal error occured, please try again")})}},computed:{user:function(){return this.$store.getters.currentUser},isLoggedIn:function(){return this.$store.getters.isLoggedIn},isAdmin:function(){return!!this.$store.getters.currentUser&&this.$store.getters.currentUser.isAdmin},isLoggedInAdmin:function(){return!!this.$store.getters.isLoggedIn&&this.$store.getters.currentUser.isAdmin}}},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[s("div",{staticClass:"modal fade",attrs:{id:"noticeModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.notice,expression:"notice"}],staticClass:"form-control",attrs:{id:"message-text"},domProps:{value:t.notice},on:{input:function(e){e.target.composing||(t.notice=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:t.editNotice}},[t._v("Update")])])])])]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[s("ul",{staticClass:"navbar-nav mr-auto"},[s("li",{staticClass:"nav-item active"},[s("router-link",{staticClass:"navbar-brand hover-effect",attrs:{to:"/"}},[t._v("Home")])],1),t._v(" "),s("li",{staticClass:"nav-item dropdown"},[s("a",{staticClass:"nav-link dropdown-toggle hover-effect",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                    ☘More Fun\n                ")]),t._v(" "),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:"/morefun/cat"}},[t._v("Cat")]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:"/morefun/dog"}},[t._v("Dog")]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:"/morefun/cnnews"}},[t._v("China News")]),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:"/morefun/usnews"}},[t._v("US News")])],1)])]),t._v(" "),s("ul",{staticClass:"navbar-nav"},[t.isLoggedIn?s("li",{staticClass:"nav-item dropdown"},[s("a",{staticClass:"nav-link dropdown-toggle hover-effect",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                    "+t._s(t.user.username)+"\n                ")]),t._v(" "),s("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"navbarDropdown"}},[s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"UserPosts",params:{userId:t.user.userId}}}},[t._v("My Posts")]),t._v(" "),s("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:t.logout}},[t._v("Log Out")]),t._v(" "),s("div",{staticClass:"dropdown-divider"}),t._v(" "),s("router-link",{staticClass:"dropdown-item",attrs:{to:{name:"UserPosts",params:{userId:t.user.userId}}}},[t._v("My Profile")])],1)]):t._e(),t._v(" "),t.isLoggedIn?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link hover-effect",attrs:{to:"/addPost"}},[t._v(" New Post ✍")])],1):t._e(),t._v(" "),t.isAdmin?s("li",{staticClass:"nav-item"},[s("button",{staticClass:"btn btn-default",attrs:{"data-toggle":"modal","data-target":"#noticeModal"}},[t._v("Notice")])]):t._e(),t._v(" "),t.isLoggedIn?t._e():s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link hover-effect",attrs:{to:"/login"}},[s("a",[t._v("Login")])])],1),t._v(" "),t.isLoggedIn?t._e():s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link hover-effect",attrs:{to:"/register"}},[t._v("Register")])],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var C={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"blog-footer"},[e("p",[this._v("© Copyright 2019 "),e("a",{attrs:{href:"http://www.shenyu16.com",target:"_blank"}},[this._v("Shenyu")])])])}]};var b={name:"App",components:{appHeader:s("VU/8")(h,_,!1,function(t){s("aLfM")},"data-v-3e302824",null).exports,appFooter:s("VU/8")(null,C,!1,function(t){s("7dLg")},"data-v-3bbcb5cc",null).exports},created:function(){this.$store.dispatch("tryAutoLogin")}},P={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("app-header"),this._v(" "),e("router-view"),this._v(" "),e("app-footer"),this._v(" "),e("notifications",{attrs:{group:"foo"}})],1)},staticRenderFns:[]};var w=s("VU/8")(b,P,!1,function(t){s("ZgFG")},null,null).exports,y=s("/ocq"),I={data:function(){return{totalItems:0,currentPage:1,hasNextPage:!1,hasPreviousPage:!1,nextPage:1,previousPage:1,lastPage:1,hrefPrevious:null,hrefNextPage:null,hrefLastPage:null}},created:function(){var t=this;g(1).then(function(e){t.totalItems=e.data.totalItems,t.currentPage=e.data.currentPage,t.hasNextPage=e.data.hasNextPage,t.hasPreviousPage=e.data.hasPreviousPage,t.nextPage=e.data.nextPage,t.previousPage=e.data.previousPage,t.lastPage=e.data.lastPage,t.hrefPrevious="#page="+e.data.previousPage,t.hrefNextPage="#page="+e.data.nextPage,t.hrefLastPage="#page="+e.data.lastPage,t.$store.dispatch("setPosts",e.data.posts)})},methods:{postDetail:function(t){this.$store.commit("CURRENT_POST",t),this.$router.replace("/postDetail/"+t._id)},isCurrentPage:function(t){return!1},getPostsByPage:function(t){var e=this;g(t).then(function(t){e.totalItems=t.data.totalItems,e.currentPage=t.data.currentPage,e.hasNextPage=t.data.hasNextPage,e.hasPreviousPage=t.data.hasPreviousPage,e.nextPage=t.data.nextPage,e.previousPage=t.data.previousPage,e.lastPage=t.data.lastPage,e.hrefPrevious="#page="+t.data.previousPage,e.hrefNextPage="#page="+t.data.nextPage,e.hrefLastPage="#page="+t.data.lastPage,e.$store.dispatch("setPosts",t.data.posts)})}},computed:{noticeContent:function(){return this.$store.getters.currentNotice},posts:function(){return this.$store.getters.posts}}},x={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 offset-2 notice"},[s("h3",{staticClass:"neon"},[t._v("\n                "+t._s(t.noticeContent)+"\n            ")])]),t._v(" "),s("div",{staticClass:"col-8 offset-2 posts"},t._l(t.posts,function(e){return s("div",{staticClass:"single-post",on:{click:function(s){t.postDetail(e)}}},[s("div",{staticClass:"post-left"},[s("span",{staticClass:"badge badge-pill badge-warning"},[t._v(t._s(e.replies.length))])]),t._v(" "),s("div",{staticClass:"post-right"},[s("div",{staticClass:"post"},[s("div",{staticClass:"post-title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"post-author"},[s("i",{staticClass:"material-icons"},[t._v("person")]),t._v(" "+t._s(e.username))])]),t._v(" "),s("div",{staticClass:"post"},[s("div",{staticClass:"post-brief"},[t._v(t._s(e.brief))]),t._v(" "),s("div",{staticClass:"post-date"},[t._v(t._s(e.postDate))])])])])}),0)]),t._v(" "),s("nav",{attrs:{id:"page-nav","aria-label":"Page navigation"}},[s("ul",{staticClass:"pagination justify-content-center"},[1!==t.currentPage&&1!==t.previousPage?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:"#page=1"},on:{click:function(e){t.getPostsByPage(1)}}},[t._v("1")])]):t._e(),t._v(" "),t.hasPreviousPage?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:t.hrefPrevious},on:{click:function(e){t.getPostsByPage(t.previousPage)}}},[t._v(t._s(t.previousPage))])]):t._e(),t._v(" "),s("li",{staticClass:"page-item active"},[s("a",{staticClass:"page-link",attrs:{href:"#"}},[t._v(t._s(t.currentPage))])]),t._v(" "),t.hasNextPage?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:t.hrefNextPage},on:{click:function(e){t.getPostsByPage(t.nextPage)}}},[t._v(t._s(t.nextPage))])]):t._e(),t._v(" "),t.lastPage!=t.currentPage&&t.nextPage!=t.lastPage?s("li",{staticClass:"page-item"},[s("a",{staticClass:"page-link",attrs:{href:t.hrefLastPage},on:{click:function(e){t.getPostsByPage(t.lastPage)}}},[t._v(t._s(t.lastPage))])]):t._e()])])])},staticRenderFns:[]};var k=s("VU/8")(I,x,!1,function(t){s("ftTr")},"data-v-5ae492e8",null).exports,E=function(t){return o().post("register",t)},U=function(t){return o().post("login",t)},S={data:function(){return{username:"",password:"",error:!1}},methods:{onSubmit:function(){var t=this;U({username:this.username,password:this.password}).then(function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("userId",e.data.userId),localStorage.setItem("username",e.data.username),localStorage.setItem("isAdmin",e.data.isAdmin),localStorage.setItem("expirationDate",e.data.expirationDate),t.$store.commit("SET_USER",{username:e.data.username,userId:e.data.userId,email:e.data.email,isAdmin:e.data.isAdmin}),t.$store.commit("SET_TOKEN",e.data.token),t.$store.dispatch("setPosts",e.data.posts),t.$store.dispatch("setLogoutTimer"),t.$router.push("/")}).catch(function(e){401==e.response.status?t.error=!0:alert("An internal error occured, please try again")})}}},T={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[s("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Please sign in")]),t._v(" "),s("label",{staticClass:"sr-only"},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),s("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),t.error?s("div",{staticClass:"checkbox mb-3 error"},[s("label",[t._v("\n            Either your username or password is incorrect, please re-enter\n        ")])]):t._e(),t._v(" "),t._m(0),t._v(" "),s("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("Sign in")]),t._v(" "),s("div",{staticClass:"checkbox m-3"},[s("label",[t._v("\n            No account? "),s("router-link",{attrs:{to:"/register"}},[t._v("Register")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"checkbox mb-3"},[e("label",[e("input",{attrs:{type:"checkbox",value:"remember-me"}}),this._v(" Remember me\n        ")])])}]};var N=s("VU/8")(S,T,!1,function(t){s("qBZl")},"data-v-44aa6646",null).exports,R={data:function(){return{username:"",password:"",confirmpassword:"",error:null,bad_pw:!1,unmatch:!1}},methods:{register:function(){var t=this;this.password.trim().length<=5&&(this.bad_pw=!0),this.password==this.confirmpassword?E({username:this.username,password:this.password.trim()}).then(function(e){t.$notify({group:"foo",title:"Success",text:"New account created!"}),t.$router.push("/login")}).catch(function(e){400==e.response.status?t.error=e.response.data.error:409==e.response.status?t.error=e.response.data.message:alert("Internal error occured, please try again")}):this.unmatch=!0}},computed:{}},D={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-4 offset-4"},[s("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("Register")]),t._v(" "),s("label",{staticClass:"sr-only"},[t._v("Username")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),s("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",class:{alert:t.bad_pw},attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),s("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Confirm Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmpassword,expression:"confirmpassword"}],staticClass:"form-control",class:{alert:t.unmatch},attrs:{type:"password",placeholder:"Confirm Password",required:""},domProps:{value:t.confirmpassword},on:{input:function(e){e.target.composing||(t.confirmpassword=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v("Sign Up")])])]),t._v(" "),s("div",{staticClass:"col-3 pt-5 mt-2"},[s("div",{staticClass:"error",domProps:{innerHTML:t._s(t.error)}})])])])},staticRenderFns:[]};var M=s("VU/8")(R,D,!1,function(t){s("41pr")},"data-v-5d986efc",null).exports,L=s("V8mf"),A=s.n(L),z=(s("yPE/"),{data:function(){return{title:"",brief:"",contents:"",editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link","image","video"]],syntax:{highlight:function(t){return A.a.highlightAuto(t).value}}}}}},methods:{onEditorChange:function(t){t.quill,t.html;var e=t.text;if(e.length<100)this.brief=e;else{for(var s=e.split(""),a=[],n=0;n<100;n++)a.push(s[n]);this.brief=a.join("")}},submit:function(){var t=this,e={userId:this.$store.getters.currentUser.userId,username:this.$store.getters.currentUser.username,title:this.title,brief:this.brief,contents:this.contents,date:this.time,likes:0,dislikes:0};i(e).then(function(e){t.$notify({group:"foo",title:"Success",text:"A new post is added!"}),t.$store.dispatch("addPost",e.data.post).then(function(){t.$router.replace("/home")})}).catch(function(e){401==e.response.status?(alert("Your authentication expired, plz login"),console.log("Not authenticated operation, plz login"),t.$router.replace("/login")):403==e.response.status?alert("You have no authorization"):alert("Internal error occured, please try again")})}},computed:{time:function(){var t=new Date,e=t.getFullYear(),s=t.getMonth()+1,a=t.getDate();return t.getHours()+":"+t.getMinutes()+" "+s+"/"+a+"/"+e},editor:function(){return this.$refs.myTextEditor.quill},contentCode:function(){return A.a.highlightAuto(this.content).value}},mounted:function(){console.log("this is current quill instance object",this.editor)}}),O={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"title"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-title",attrs:{type:"text",placeholder:"Enter title here"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"editor"},[s("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption},on:{change:function(e){t.onEditorChange(e)}},model:{value:t.contents,callback:function(e){t.contents=e},expression:"contents"}})],1),t._v(" "),s("div",{staticClass:"submit"},[s("button",{staticClass:"btn btn-success",on:{click:t.submit}},[t._v("Submit")])])])},staticRenderFns:[]};var F=s("VU/8")(z,O,!1,function(t){s("QGhU")},"data-v-6290b3ba",null).exports,q={data:function(){return{title:this.$store.getters.currentPost.title,contents:this.$store.getters.currentPost.contents,brief:this.$store.getters.currentPost.brief,editorOption:{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{color:[]},{background:[]}],[{align:[]}],["clean"],["link","image","video"]],syntax:{highlight:function(t){return A.a.highlightAuto(t).value}}}}}},methods:{onEditorChange:function(t){t.quill,t.html;var e=t.text;if(e.length<100)this.brief=e;else{for(var s=e.split(""),a=[],n=0;n<100;n++)a.push(s[n]);this.brief=a.join("")}},submit:function(){var t=this,e={postId:this.$store.getters.currentPost._id,userId:this.$store.getters.currentUser.userId,username:this.$store.getters.currentUser.username,title:this.title,brief:this.brief,contents:this.contents,date:this.time};l(e).then(function(s){t.$store.commit("CURRENT_POST",s.data.post),t.$router.replace("/postDetail/"+e.postId)}).catch(function(e){401==e.response.status?(alert("Your authentication expired, plz login"),console.log("Not authenticated operation, plz login"),t.$router.replace("/login")):403==e.response.status?alert("You have no authorization"):alert("Internal error occured, please try again")})},cancel:function(){this.$router.replace("/postDetail/"+post.postId)}},computed:{time:function(){var t=new Date,e=t.getFullYear(),s=t.getMonth()+1,a=t.getDate();return t.getHours()+":"+t.getMinutes()+" "+s+"/"+a+"/"+e},editor:function(){return this.$refs.myTextEditor.quill},contentCode:function(){return A.a.highlightAuto(this.content).value}},mounted:function(){console.log("this is current quill instance object",this.editor)}},Y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"title"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-title",attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"editor"},[s("quill-editor",{ref:"myTextEditor",attrs:{options:t.editorOption},on:{change:function(e){t.onEditorChange(e)}},model:{value:t.contents,callback:function(e){t.contents=e},expression:"contents"}})],1),t._v(" "),s("div",{staticClass:"submit"},[s("button",{staticClass:"btn btn-secondary",on:{click:function(e){t.$router.go(-1)}}},[t._v("Cancel")]),t._v(" "),s("button",{staticClass:"btn btn-success",on:{click:t.submit}},[t._v("Submit")])])])},staticRenderFns:[]};var V=s("VU/8")(q,Y,!1,function(t){s("UJdP")},"data-v-ba9836e4",null).exports,K={created:function(){var t=this;m(this.$route.params.postId).then(function(e){t.postId=e.data._id,t.title=e.data.title,t.brief=e.data.brief,t.contents=e.data.contents,t.date=e.data.postDate,t.replies=e.data.replies,t.username=e.data.username,t.userId=e.data.userId,t.likes=e.data.likes,t.dislikes=e.data.dislikes}).catch(function(e){404==e.response.status?(alert("Could not find this blog!"),t.$router.push("/blog")):alert("Internal error occured, please try again")})},data:function(){return{isModalVisible:!1,replyMessage:"",replyTo:"",postId:null,title:null,brief:null,contents:null,date:null,replies:[],username:null,userId:null,likes:0,dislikes:0,currentUserId:this.$store.getters.isLoggedIn?this.$store.getters.currentUser.userId:null}},computed:{postDetail:function(){return"#/postDetail/"+this.postId},isLoggedIn:function(){return this.$store.getters.isLoggedIn},postOwner:function(){return!!this.isLoggedIn&&(this.$store.getters.currentUser.isAdmin||this.userId==this.currentUserId)},time:function(){var t=new Date,e=t.getFullYear(),s=t.getMonth()+1,a=t.getDate();return t.getHours()+":"+t.getMinutes()+", "+s+"/"+a+"/"+e}},methods:{replyWhom:function(t,e){this.replyMessage+="@"+t+": "},imageSrc:function(t){return"https://robohash.org/"+t+".png?bgset=bg2&size=200x200&set=set4"},goToEditPost:function(t){this.$router.replace("/editPost/"+t)},deletePost:function(){var t=this;confirm("Delete this post?")&&c(this.postId,this.currentUserId).then(function(){t.$router.replace("/")}).catch(function(e){401==e.response.status?($("#exampleModal").modal("hide"),alert("Your authentication expired, plz login"),console.log("log: Not authenticated operation, plz login"),t.$router.replace("/login")):403==e.response.status?alert("You have no authorization"):alert("Internal error occured, please try again")})},deleteReply:function(t,e){var s=this;u(t,this.currentUserId).then(function(){s.replies.splice(e,1)}).catch(function(t){401==t.response.status?($("#exampleModal").modal("hide"),alert("Your authentication expired, plz login"),console.log("log: Not authenticated operation, plz login"),s.$router.replace("/login")):403==t.response.status?alert("You have no authorization"):alert("Internal error occured, please try again")})},addReply:function(t){var e=this;if(!this.isLoggedIn)return confirm("You are not signed in, login now?")?($("#exampleModal").modal("hide"),this.$router.replace("/login")):void 0;var s={postId:this.postId,userId:this.$store.getters.currentUser.userId,username:this.$store.getters.currentUser.username,replyContent:this.replyMessage,date:this.time,likes:0,dislikes:0};f(s).then(function(t){$("#exampleModal").modal("hide"),e.replies.push(t.data.reply),e.replyMessage=""}).catch(function(t){401==t.response.status?($("#exampleModal").modal("hide"),alert("Your authentication expired, plz login"),console.log("log: Not authenticated operation, plz login"),e.$router.replace("/login")):403==t.response.status?alert("You have no authorization"):alert("Internal error occured, please try again")})}}},B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid main"},[s("div",{staticClass:"modal fade",attrs:{id:"exampleModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{staticClass:"col-form-label",attrs:{for:"message-text"}},[t._v("Reply message:")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.replyMessage,expression:"replyMessage"}],staticClass:"form-control",attrs:{id:"message-text"},domProps:{value:t.replyMessage},on:{input:function(e){e.target.composing||(t.replyMessage=e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-sm btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-primary",attrs:{type:"button"},on:{click:function(e){t.addReply("author")}}},[t._v("Send reply")])])])])]),t._v(" "),s("div",{staticClass:"header"},[s("div",{staticStyle:{width:"80%","padding-left":"0.5rem"}},[t._v(t._s(t.replies.length)+" replies, 1 page in total")]),t._v(" "),t._m(0)]),t._v(" "),s("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),s("div",{staticClass:"replies"},[s("div",{staticClass:"reply"},[s("div",{staticClass:"reply-left"},[s("div",{staticClass:"author_icon"},[s("img",{staticClass:"image",attrs:{src:t.imageSrc(t.username),alt:"Image"}})]),t._v(" "),s("div",{staticClass:"authorname"},[t._v(t._s(t.username))])]),t._v(" "),s("div",{staticClass:"reply-right"},[s("div",{staticClass:"reply_content",domProps:{innerHTML:t._s(t.contents)}}),t._v(" "),s("div",{staticClass:"reply_tail"},[s("div",[t._v("Floor 1, "+t._s(t.date)+" \n                        "),t.isLoggedIn&&t.currentUserId==t.userId?t._e():s("a",{attrs:{"data-toggle":"modal",href:"#exampleModal"}},[t._v("Reply")]),t._v(" "),t.postOwner?s("a",{attrs:{href:"#"},on:{click:t.deletePost}},[t._v("Delete")]):t._e(),t._v(" "),t.postOwner?s("router-link",{attrs:{to:"/editPost"}},[t._v("Edit")]):t._e()],1)])])]),t._v(" "),t._l(t.replies,function(e,a){return t.replies.length>0?s("div",{staticClass:"reply"},[s("div",{staticClass:"reply-left"},[s("div",{staticClass:"author_icon"},[s("img",{staticClass:"image",attrs:{src:t.imageSrc(e.username),alt:"Image"}})]),t._v(" "),s("div",{staticClass:"authorname"},[t._v(t._s(e.username))])]),t._v(" "),s("div",{staticClass:"reply-right"},[s("div",{staticClass:"reply_content"},[t._v(t._s(e.replyContent))]),t._v(" "),s("div",{staticClass:"reply_tail"},[s("div",[t._v("Floor "+t._s(a+2)+", "+t._s(e.date)+" \n                        "),t.isLoggedIn&&t.currentUserId==e.userId?t._e():s("a",{attrs:{"data-toggle":"modal",href:"#exampleModal"},on:{click:function(s){t.replyWhom(e.username)}}},[t._v("Reply")]),t._v(" "),t.currentUserId==e.userId?s("a",{attrs:{href:"#"},on:{click:function(s){t.deleteReply(e._id,a)}}},[t._v("Delete")]):t._e()])])])]):t._e()})],2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"10%"}},[e("button",{staticClass:"btn btn-secondary btn-sm",attrs:{type:"button","data-toggle":"modal","data-target":"#exampleModal"}},[this._v("Reply")])])}]};var H=s("VU/8")(K,B,!1,function(t){s("WZ+W")},"data-v-5d105523",null).exports,W={created:function(){var t=this;v(this.$route.params.userId).then(function(e){t.posts=e.data}).catch()},methods:{postDetail:function(t){this.$store.commit("CURRENT_POST",t),this.$router.replace("/postDetail/"+t._id)}},data:function(){return{posts:[]}}},Z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid main"},[s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"col-8 offset-2"},t._l(t.posts,function(e){return s("div",{staticClass:"single-post",on:{click:function(s){t.postDetail(e)}}},[s("div",{staticClass:"post-left"},[s("span",{staticClass:"badge badge-pill badge-warning"},[t._v(t._s(e.replies.length))])]),t._v(" "),s("div",{staticClass:"post-right"},[s("div",{staticClass:"post"},[s("div",{staticClass:"post-title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"post-author"},[s("i",{staticClass:"material-icons"},[t._v("person")]),t._v(" "+t._s(e.username))])]),t._v(" "),s("div",{staticClass:"post"},[s("div",{staticClass:"post-brief"},[t._v(t._s(e.brief))]),t._v(" "),s("div",{staticClass:"post-date"},[t._v(t._s(e.postDate))])])])])}),0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-10 offset-2"},[e("h3",[this._v("My Posts")])])}]};var j=s("VU/8")(W,Z,!1,function(t){s("fm3e")},"data-v-e2a26b5c",null).exports,G={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-4 offset-4"},[e("h3",[this._v("Coming Soon!")])])])])}]};var J=s("VU/8")(null,G,!1,function(t){s("ZWKw")},"data-v-7251c930",null).exports,Q={beforeCreate:function(){var t=this;r.a.get("https://aws.random.cat/meow").then(function(e){var s=e.data.file;t.$store.dispatch("setCat",s)}).catch(function(t){alert("Internal error occured, plz try again!")})},data:function(){return{}},methods:{randomCat:function(){var t=this;r.a.get("https://aws.random.cat/meow").then(function(e){var s=e.data.file;t.$store.dispatch("setCat",s)}).catch(function(t){alert("Internal error occured, plz try again!")})}},computed:{cat:function(){return this.$store.getters.cat}}},X={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-fluid main"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"random-btn"},[e("button",{staticClass:"btn btn-success",on:{click:this.randomCat}},[this._v("Show Random Cat!")])])]),this._v(" "),e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"img-box"},[e("div",{staticClass:"frame"},[e("img",{attrs:{src:this.cat,alt:"this is a cat"}})])])])])},staticRenderFns:[]};var tt=s("VU/8")(Q,X,!1,function(t){s("NCou")},"data-v-ce273d94",null).exports,et={created:function(){var t=this;this.loading=!0,r.a.get("https://dog.ceo/api/breeds/image/random/2").then(function(e){t.loading=!1;var s=e.data.message;t.$store.dispatch("setDogs",s)}).catch(function(t){alert("Internal error occured, plz try again!")})},data:function(){return{loading:!1}},methods:{randomDogs:function(){var t=this;this.loading=!0,r.a.get("https://dog.ceo/api/breeds/image/random/2").then(function(e){t.loading=!1;var s=e.data.message;t.$store.dispatch("setDogs",s)}).catch(function(t){alert("Internal error occured, plz try again!")})}},computed:{dogs:function(){return this.$store.getters.dogs}}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid main"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"random-btn"},[a("button",{staticClass:"btn btn-success",on:{click:t.randomDogs}},[t._v("Show Random Dogs!")])])]),t._v(" "),t.loading?a("div",{staticClass:"container-fluid loading"},[a("img",{attrs:{src:s("1EKY"),alt:""}})]):t._e(),t._v(" "),t.loading?t._e():a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"img-box"},[a("div",{staticClass:"frame"},[a("img",{attrs:{src:t.dogs[0],alt:"this is a dog"}})])])]),t._v(" "),t.loading?t._e():a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"img-box"},[a("div",{staticClass:"frame"},[a("img",{attrs:{src:t.dogs[1],alt:"this is a dog"}})])])])])},staticRenderFns:[]};var at=s("VU/8")(et,st,!1,function(t){s("Q5pd")},"data-v-5d6359af",null).exports,nt=s("Fi+T"),rt=s.n(nt),ot={beforeCreate:function(){var t=this;r.a.get("https://newsapi.org/v2/top-headlines?country=cn&apiKey="+rt.a).then(function(e){var s=e.data.articles;t.$store.dispatch("setUsnews",s)}).catch(function(t){alert("Internal error occured, plz try again!")})},computed:{news:function(){return this.$store.getters.usnews}}},it={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid main"},[t._m(0),t._v(" "),t._l(t.news,function(e){return s("div",{staticClass:"newsblock"},[s("div",{staticClass:"container-fluid title"},[s("h3",[t._v(t._s(e.title))])]),t._v(" "),null!=e.urlToImage?s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:e.urlToImage,alt:"image"}})])]):t._e(),t._v(" "),s("div",{staticClass:"container-fluid brief"},[s("p",[t._v(t._s(e.description)),s("span",[s("a",{attrs:{href:e.url,target:"_blank"}},[t._v("Read More")])])])])])})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("a",{attrs:{href:"https://newsapi.org",target:"_blank"}},[this._v("Powered by News API")])])}]};var lt=s("VU/8")(ot,it,!1,function(t){s("bO+I")},"data-v-61c6cefc",null).exports,ct={beforeCreate:function(){var t=this;r.a.get("https://newsapi.org/v2/top-headlines?country=us&apiKey="+rt.a).then(function(e){var s=e.data.articles;t.$store.dispatch("setUsnews",s)}).catch(function(t){alert("Internal error occured, plz try again!")})},computed:{news:function(){return this.$store.getters.usnews}}},ut={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid main"},[t._m(0),t._v(" "),t._l(t.news,function(e){return s("div",{staticClass:"newsblock"},[s("div",{staticClass:"container-fluid title"},[s("h3",[t._v(t._s(e.title))])]),t._v(" "),null!=e.urlToImage?s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"img-box"},[s("img",{attrs:{src:e.urlToImage,alt:"image"}})])]):t._e(),t._v(" "),s("div",{staticClass:"container-fluid brief"},[s("p",[t._v(t._s(e.description)),s("span",[s("a",{attrs:{href:e.url,target:"_blank"}},[t._v("Read More")])])])])])})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("a",{attrs:{href:"https://newsapi.org",target:"_blank"}},[this._v("Powered by News API")])])}]};var dt=s("VU/8")(ct,ut,!1,function(t){s("Ext2")},"data-v-2f6fc5d2",null).exports;a.default.use(y.a);var pt=new y.a({routes:[{path:"/",name:"Home",component:k},{path:"/home",name:"Home",component:k},{path:"/login",name:"Login",component:N},{path:"/register",name:"Register",component:M},{path:"/addPost",name:"AddPost",component:F},{path:"/editPost",name:"EditPost",component:V},{path:"/postDetail/:postId",name:"PostDetail",component:H},{path:"/userPosts/:userId",name:"UserPosts",component:j},{path:"/userProfile/:userId",name:"UserProfile",component:J},{path:"/morefun/cat",name:"Cat",component:tt},{path:"/morefun/dog",name:"Dog",component:at},{path:"/morefun/cnnews",name:"CNNews",component:lt},{path:"/morefun/usnews",name:"USNews",component:dt},{path:"*",component:k}]}),gt=s("NYxO"),vt={posts:[],post:{},notice:""},mt={state:vt,mutations:{UPDATE_NOTICE:function(t,e){t.notice=e},UPDATE_POSTS:function(t,e){t.posts.push(e)},CURRENT_POST:function(t,e){t.post=e}},actions:{addPost:function(t,e){t.state,(0,t.commit)("UPDATE_POSTS",e)},setPosts:function(t,e){var s=t.state;t.commit,s.posts=e}},getters:{posts:function(){return vt.posts},currentPost:function(){return vt.post},currentNotice:function(){return vt.notice}}},ft={token:null,user:null,isUserLoggedIn:!1},ht={state:ft,mutations:{SET_TOKEN:function(t,e){t.token=e,e?t.isUserLoggedIn=!0:(t.isUserLoggedIn=!1,localStorage.clear())},SET_USER:function(t,e){t.user=e,e?t.isUserLoggedIn=!0:(localStorage.clear(),t.isUserLoggedIn=!1)}},actions:{setToken:function(t,e){return(0,t.commit)("SET_TOKEN",e)},setUser:function(t,e){return(0,t.commit)("SET_USER",e)},tryAutoLogin:function(t){var e=t.commit,s=(t.dispatch,localStorage.getItem("token")),a=localStorage.getItem("userId"),n=localStorage.getItem("username");return s?localStorage.getItem("expirationDate")<=(new Date).getTime()?(localStorage.clear(),e("SET_USER",null),void e("SET_TOKEN",null)):(e("SET_USER",{username:n,userId:a}),void e("SET_TOKEN",s)):(e("SET_USER",null),void e("SET_TOKEN",null))},setLogoutTimer:function(t){var e=t.commit;setTimeout(function(){console.log("Auto log out from timer"),e("SET_USER",null),e("SET_TOKEN",null),localStorage.clear(),pt.push("/login")},36e5)}},getters:{currentUser:function(){return ft.user},isLoggedIn:function(){return ft.isUserLoggedIn}}},_t={cat:null,dogs:[],cnnews:[],usnews:[]},Ct={state:_t,mutations:{},actions:{setCat:function(t,e){var s=t.state;t.commit,s.cat=e},setDogs:function(t,e){var s=t.state;t.commit,s.dogs=e},setCnnews:function(t,e){var s=t.state;t.commit,s.cnnews=e},setUsnews:function(t,e){var s=t.state;t.commit,s.usnews=e}},getters:{cat:function(){return _t.cat},dogs:function(){return _t.dogs},cnnews:function(){return _t.cnnews},usnews:function(){return _t.usnews}}};a.default.use(gt.a);var bt=new gt.a.Store({modules:{postsModule:mt,usersModule:ht,morefunModule:Ct},state:{},mutations:{},actions:{},getters:{}}),Pt=s("CLX7"),wt=s.n(Pt),yt=s("G0J2"),It=s.n(yt);s("3f40"),s("4qOc"),s("+cgv");a.default.config.productionTip=!1,a.default.use(wt.a),a.default.use(It.a),new a.default({el:"#app",router:pt,store:bt,components:{App:w},template:"<App/>"})},Q5pd:function(t,e){},QGhU:function(t,e){},UJdP:function(t,e){},"WZ+W":function(t,e){},ZWKw:function(t,e){},ZgFG:function(t,e){},aLfM:function(t,e){},"bO+I":function(t,e){},fm3e:function(t,e){},ftTr:function(t,e){},qBZl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.5a6167c6647092604c8e.js.map